# User-Activity-Management Microservices

Этот проект представляет собой микросервисное приложение, состоящее из двух сервисов: **сервис пользователей** и **сервис истории действий с пользователями**. В данной системе пользователи могут быть созданы, изменены, и их активность отслеживается с сохранением истории.

## Сервис Пользователей (users-service)

Сервис пользователей отвечает за управление пользователями. Он предоставляет следующие API-эндпоинты:

- **Создание пользователя**
  - **Метод:** POST
  - **Путь:** `/users`
  - **Описание:** Создает нового пользователя.
  - **Пример запроса:**
    ```json
    {
      "age": 18,
      "firstName": "Эльвин",
      "lastName": "Агакеримов"
    }
    ```
  - **Пример успешного ответа:**
    ```json
    {
      "id": "uniqueUserId",
      "fullName": "Эльвин Агакеримов",
      "age": 18,
      "createdAt": "timestamp"
    }
    ```

- **Изменение пользователя**
  - **Метод:** PUT
  - **Путь:** `/users/{userId}`
  - **Описание:** Изменяет существующего пользователя по его идентификатору.
  - **Пример запроса:**
    ```json
    {
      "age": 20,
      "firstName": "Агакеримов",
      "lastName": "Эльвин"
    }
    ```

- **Получение списка пользователей**
  - **Метод:** GET
  - **Путь:** `/users`
  - **Описание:** Возвращает список всех пользователей.
  - **Пример ответа:**
    ```json
    [
      {
        "id": "uniqueUserId",
        "fullName": "Эльвин Агакеримов",
        "age": 18,
        "createdAt": "timestamp"
      }
    ]
    ```

- **Получение истории действий с пользователями**
  - **Метод:** GET
  - **Путь:** `/users/history`
  - **Описание:** Возвращает историю действий с пользователями.
  - **Пример ответа:**
    ```json
    {
      "pagesCount": 1,
      "page": 1,
      "pageSize": 10,
      "totalCount": 1,
      "items": [
        {
          "userId": "uniqueUserId",
          "actualData": {
            "fullName": "Эльвин Агакеримов",
            "age": 20,
            "changedAt": "timestamp"
          },
          "oldData": []
        }
      ]
    }
    ```

## Сервис Истории Действий с пользователями (action-stories-service)

Сервис истории действий с пользователями отслеживает создание и изменение пользователей. Он предоставляет следующие API:

- **Создание истории действия с пользователем**
  - **Метод:** POST
  - **Путь:** `/history/create`
  - **Описание:** Регистрирует событие создания или изменения пользователя.
  - **Пример запроса:**
    ```json
    {
      "id": "uniqueUserId",
      "fullName": "Имя Фамилия",
      "age": 20
    }
    ```

- **Получение истории всех действий с пользователями**
  - **Метод:** GET
  - **Путь:** `/history`
  - **Описание:** Возвращает историю всех действий с пользователями.
  - **Пример ответа:**
    ```json
    {
      "pagesCount": 1,
      "page": 1,
      "pageSize": 10,
      "totalCount": 1,
      "items": [
        {
          "userId": "uniqueUserId",
          "actualData": {
            "fullName": "Эльвин Агакеримов",
            "age": 20,
            "changedAt": "timestamp"
          },
          "oldData": []
        }
      ]
    }
    ```

- **Получение истории действий с определенным пользователем**
  - **Метод:** GET
  - **

Путь:** `/history/{userId}`
  - **Описание:** Возвращает историю действий с определенным пользователем.
  - **Пример ответа:**
    ```json
    {
      "pagesCount": 1,
      "page": 1,
      "pageSize": 10,
      "totalCount": 1,
      "items": [
        {
          "userId": "uniqueUserId",
          "actualData": {
            "fullName": "Эльвин Агакеримов",
            "age": 20,
            "changedAt": "timestamp"
          },
          "oldData": []
        }
      ]
    }
    ```

- **Удаление данных тестирования**
  - **Метод:** DELETE
  - **Путь:** `/history/testing/all-data`
  - **Описание:** Удаляет все данные, используемые для тестирования.

## Технологии и Библиотеки

- **Node.js** - Серверная среда выполнения JavaScript.
- **NestJS** - Фреймворк для создания масштабируемых и эффективных серверных приложений на Node.js.
- **Express** - Web-фреймворк для Node.js.
- **Sequelize** - Объектно-реляционное отображение (ORM) для работы с базой данных PostgreSQL.
- **Swagger** - Инструмент для создания документации API.

## Установка и Запуск

1. Установите зависимости для каждого сервиса:

   ```
   cd users-service
   npm install

   cd action-stories-service
   npm install
   ```

2. Запустите каждый сервис:

   ```
   cd users-service
   npm start

   cd action-stories-service
   npm start
   ```

3. После запуска сервисов, вы можете обращаться к API по соответствующим URL и порту.
